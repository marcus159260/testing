<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

</head>
<body>
    <!-- <script>
        var map
        var service
        var infowindow 

        function initialize() {
            var pyrmont = new google.maps.LatLng(-33.8665433, 151.19156316)

            map = new google.maps.Map(document.getElementById('map'), {
                center:pyrmont,
                zoom:15
            })
        }

        google.maps.event.addDomListener(window, 'load', initialize)

    </script> -->

    <h2>Userlocation: </h2>
    <div id="lat">
        lat: 
    </div>
    <div id="lng">
        lng: 
    </div>
    <br>
    <h1>top 10 nearby places based on user location:</h1>
    <p id="top10"></p>
    
    <h2>Google Map:</h2>
    <div id="map"></div>


    <script>
        (function(global) {
            global.initMap = async function() {
                try {
                    const response = await fetch(`https://maps.googleapis.com/maps/api/js?key=AIzaSyDuWCAvENcOz861ihyW1EOF8WTJAzKfHfY&v=weekly`);
                    await response.text(); // Ensure script is executed
                    const { Map } = google.maps; // Assuming Map is the constructor for creating a map
                    const map = new Map(document.getElementById("map"), {
                        center: { lat: -34.397, lng: 150.644 },
                        zoom: 8,
                    });
                } catch (error) {
                    console.error("Error loading Google Maps API:", error);
                }
            }
        })(window);
    </script>
    
    <!-- Include this script tag at the end of the body to ensure it's executed after the above script -->
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuWCAvENcOz861ihyW1EOF8WTJAzKfHfY&v=weekly&callback=initMap"></script>
    

    <!-- Connect to Google Maps API
    <script 
        async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuWCAvENcOz861ihyW1EOF8WTJAzKfHfY&libraries=places&callback=initMap">
    </script> -->






    
    

    <!-- <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src=" {{ url_for('static', filename='js/getlocation.js') }}"></script> -->
</body>
</html>